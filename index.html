<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P&L –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
    <meta name="description" content="–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä P&L (–û–ü–∏–£). –†–∞–∑–±–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç—á–µ—Ç–∞: –æ—Ç –≤—ã—Ä—É—á–∫–∏ –¥–æ —á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏.">
    
    <meta property="og:title" content="–£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π P&L –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞">
    <meta property="og:description" content="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á–µ—Ç–∞. –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ EBITDA –∏ –Ω–∞–π–¥–∏—Ç–µ —Ç–æ—á–∫–∏ —Ä–æ—Å—Ç–∞.">
    <meta property="og:type" content="website">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìà</text></svg>">

    <style>
        :root {
            /* Colors */
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --accent: #0f172a;
            --bg-body: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            
            /* Semantic Colors for Finance */
            --c-revenue: #3b82f6;
            --c-var: #ef4444;
            --c-margin: #f59e0b;
            --c-profit: #10b981;

            /* Spacing & UI */
            --container-width: 1200px;
            --radius: 12px;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --font-main: 'Inter', sans-serif;
        }

        /* Reset & Base */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: var(--font-main);
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
        }

        h1, h2, h3, h4 { line-height: 1.2; font-weight: 700; color: var(--accent); margin-bottom: 1rem; }
        p { margin-bottom: 1rem; color: var(--text-muted); }
        a { text-decoration: none; color: inherit; transition: 0.2s; }
        ul { list-style: none; }

        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        .btn:hover { background: var(--primary-dark); transform: translateY(-2px); }

        /* --- Sections --- */
        section { padding: 80px 0; border-bottom: 1px solid var(--border); }
        .section-header { text-align: center; margin-bottom: 50px; max-width: 800px; margin-left: auto; margin-right: auto; }
        .section-header h2 { font-size: 2.25rem; }

        /* --- Hero --- */
        .hero {
            padding: 100px 0 80px;
            background: white;
            text-align: center;
        }
        .hero h1 { font-size: clamp(2.5rem, 5vw, 3.5rem); margin-bottom: 24px; }
        .hero p { font-size: 1.25rem; max-width: 700px; margin: 0 auto 32px; }

        /* --- Structure Grid (NEW BLOCK) --- */
        .struct-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }

        .struct-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }
        .struct-card:hover { transform: translateY(-5px); box-shadow: var(--shadow); }

        /* Card color accents */
        .sc-blue { border-top: 4px solid var(--c-revenue); }
        .sc-red { border-top: 4px solid var(--c-var); }
        .sc-orange { border-top: 4px solid var(--c-margin); }
        .sc-green { border-top: 4px solid var(--c-profit); }

        .sc-icon {
            width: 40px; height: 40px;
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 16px;
            font-size: 1.2rem;
        }
        .bg-blue { background: #eff6ff; color: var(--c-revenue); }
        .bg-red { background: #fef2f2; color: var(--c-var); }
        .bg-orange { background: #fffbeb; color: var(--c-margin); }
        .bg-green { background: #f0fdf4; color: var(--c-profit); }

        .formula-badge {
            display: inline-block;
            font-family: monospace;
            font-size: 0.85rem;
            background: #f1f5f9;
            padding: 4px 8px;
            border-radius: 4px;
            color: var(--accent);
            margin-bottom: 12px;
            font-weight: 600;
        }

        /* --- Calculator --- */
        .calc-wrapper {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 40px;
            background: white;
            padding: 40px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        .calc-inputs { display: flex; flex-direction: column; gap: 16px; }
        
        .input-group label {
            font-size: 0.9rem; font-weight: 600; margin-bottom: 6px; display: block;
            color: var(--text-muted);
        }
        .input-group input {
            width: 100%; padding: 12px;
            border: 1px solid var(--border); border-radius: 8px;
            font-size: 1rem; transition: border-color 0.2s;
        }
        .input-group input:focus { outline: none; border-color: var(--primary); }

        /* Viz */
        .kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 30px; }
        .kpi-card {
            background: var(--bg-body); padding: 16px; border-radius: 8px; text-align: center;
        }
        .kpi-val { display: block; font-size: 1.1rem; font-weight: 700; color: var(--accent); margin: 4px 0; }
        .kpi-sub { font-size: 0.8rem; color: var(--text-muted); }

        /* Waterfall */
        .chart-container {
            border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin-bottom: 24px;
        }
        .waterfall {
            display: flex; align-items: flex-end; justify-content: space-between;
            height: 240px; position: relative; padding-top: 20px;
        }
        .wf-col { flex: 1; height: 100%; position: relative; display: flex; flex-direction: column; justify-content: flex-end; }
        .wf-spacer { transition: height 0.3s; }
        .wf-bar { 
            transition: height 0.3s, background 0.3s; 
            border-radius: 4px; min-height: 2px; position: relative; 
        }
        .wf-label { 
            text-align: center; font-size: 0.7rem; color: var(--text-muted); 
            margin-top: 8px; line-height: 1.2;
        }

        /* Comparison */
        .comp-wrapper { display: flex; gap: 20px; align-items: center; }
        .comp-block { flex: 1; padding: 16px; background: var(--bg-body); border-radius: 8px; }
        .comp-bar-track { height: 8px; background: #e2e8f0; border-radius: 4px; margin: 10px 0; overflow: hidden; }
        .comp-bar-fill { height: 100%; width: 0; transition: width 0.5s; background: var(--accent); }

        /* --- Footer --- */
        footer { background: var(--accent); color: white; padding: 40px 0; text-align: center; }
        .disclaimer { font-size: 0.8rem; opacity: 0.7; margin-top: 16px; max-width: 600px; margin-left: auto; margin-right: auto; }

        @media (max-width: 900px) {
            .calc-wrapper { grid-template-columns: 1fr; padding: 20px; }
            .kpi-row { grid-template-columns: 1fr 1fr; }
            .hero h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <header class="hero">
        <div class="container">
            <span style="background: #eff6ff; color: var(--primary); padding: 4px 12px; border-radius: 20px; font-size: 0.9rem; font-weight: 600;">–£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π —É—á–µ—Ç</span>
            <h1 style="margin-top: 16px;">–û—Ç—á–µ—Ç –æ –ø—Ä–∏–±—ã–ª—è—Ö –∏ —É–±—ã—Ç–∫–∞—Ö (P&L)</h1>
            <p>–ü–µ—Ä–µ—Å—Ç–∞–Ω—å—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º "–≤—Å–ª–µ–ø—É—é". –†–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—É—é EBITDA.</p>
            <a href="#structure" class="btn">–ò–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É</a>
        </div>
    </header>

    <section>
        <div class="container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center;">
            <div>
                <h2>–ü–æ—á–µ–º—É –¥–µ–Ω–µ–≥ –Ω–µ—Ç, —Ö–æ—Ç—è –ø—Ä–∏–±—ã–ª—å –µ—Å—Ç—å?</h2>
                <p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –±—É—Ö–≥–∞–ª—Ç–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å –≤ –æ—Ç—á–µ—Ç–µ, –Ω–æ –Ω–∞ —Ä–∞—Å—á–µ—Ç–Ω–æ–º —Å—á–µ—Ç–µ –ø—É—Å—Ç–æ. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —Å–º–µ—à–µ–Ω–∏—è –ø–æ–Ω—è—Ç–∏–π –∏ –æ—à–∏–±–æ–∫ –≤ —É—á–µ—Ç–µ:</p>
                <ul style="padding-left: 20px; margin-bottom: 20px;">
                    <li style="margin-bottom: 10px;">‚ùå –ü—É—Ç–∞–Ω–∏—Ü–∞ –º–µ–∂–¥—É "–î–≤–∏–∂–µ–Ω–∏–µ–º –¥–µ–Ω–µ–≥" (Cashflow) –∏ "–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ–º" (P&L).</li>
                    <li style="margin-bottom: 10px;">‚ùå "–ó–∞–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏–µ" –¥–µ–Ω–µ–≥ –≤ –∑–∞–ø–∞—Å–∞—Ö –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏.</li>
                    <li>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –∫–æ–ª–µ–±–∞–Ω–∏—è—Ö –ø—Ä–æ–¥–∞–∂.</li>
                </ul>
            </div>
            <div style="background: #f1f5f9; padding: 30px; border-radius: var(--radius); text-align: center;">
                <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="1.5">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                </svg>
                <p style="font-size: 0.9rem;">–ü—Ä–∏–±—ã–ª—å ‚Äî —ç—Ç–æ –º–Ω–µ–Ω–∏–µ.<br>–î–µ–Ω—å–≥–∏ ‚Äî —ç—Ç–æ —Ñ–∞–∫—Ç.</p>
            </div>
        </div>
    </section>

    <section id="structure" style="background: white;">
        <div class="container">
            <div class="section-header">
                <h2>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞</h2>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π P&L —Å—Ç—Ä–æ–∏—Ç—Å—è "—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑". –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –≤—ã—á–∏—Ç–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å –æ–± —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å–∞.</p>
            </div>

            <div class="struct-grid">
                <div class="struct-card sc-blue">
                    <div class="sc-icon bg-blue">üí∞</div>
                    <h3>1. –í—ã—Ä—É—á–∫–∞</h3>
                    <div class="formula-badge">–¶–µ–Ω–∞ √ó –û–±—ä–µ–º –æ—Ç–≥—Ä—É–∑–∫–∏</div>
                    <p>–î–æ—Ö–æ–¥ –ø—Ä–∏–∑–Ω–∞–µ—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç –æ—Ç–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞, –∞ –Ω–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –¥–µ–Ω–µ–≥. –ê–≤–∞–Ω—Å—ã ‚Äî —ç—Ç–æ –Ω–µ –≤—ã—Ä—É—á–∫–∞!</p>
                </div>

                <div class="struct-card sc-red">
                    <div class="sc-icon bg-red">üìâ</div>
                    <h3>2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏</h3>
                    <div class="formula-badge">–ó–∞–≤–∏—Å—è—Ç –æ—Ç –≤—ã–ø—É—Å–∫–∞</div>
                    <p>–°—ã—Ä—å–µ, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —É–ø–∞–∫–æ–≤–∫–∞, —Å–¥–µ–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞. <br><em>–ï—Å–ª–∏ –∑–∞–≤–æ–¥ —Å—Ç–æ–∏—Ç = 0.</em></p>
                </div>

                <div class="struct-card sc-orange">
                    <div class="sc-icon bg-orange">üéØ</div>
                    <h3>3. –ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥</h3>
                    <div class="formula-badge">–í—ã—Ä—É—á–∫–∞ ‚àí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</div>
                    <p>–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥ –º—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞ –ø–æ–∫—Ä—ã—Ç–∏–∏ "–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –Ω—É–ª—è" –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.</p>
                </div>

                <div class="struct-card sc-red">
                    <div class="sc-icon bg-red">üè≠</div>
                    <h3>4. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø—Ä–æ–∏–∑–≤.</h3>
                    <div class="formula-badge">–†–∞—Å—Ö–æ–¥—ã —Ü–µ—Ö–∞</div>
                    <p>–ê—Ä–µ–Ω–¥–∞ —Ü–µ—Ö–∞, –æ–∫–ª–∞–¥ –º–∞—Å—Ç–µ—Ä–∞, –æ—Ç–æ–ø–ª–µ–Ω–∏–µ. –†–∞—Å—Ö–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–≤–µ–ª–∏.</p>
                </div>

                <div class="struct-card sc-green">
                    <div class="sc-icon bg-green">üìä</div>
                    <h3>5. –í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å</h3>
                    <div class="formula-badge">–ú–∞—Ä–∂–∞ ‚àí –ü–æ—Å—Ç. –ø—Ä–æ–∏–∑–≤.</div>
                    <p>–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã <strong>—Ç–æ–ª—å–∫–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</strong>. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –ª–∏ –Ω–∞—à–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å?</p>
                </div>

                <div class="struct-card sc-red">
                    <div class="sc-icon bg-red">üè¢</div>
                    <h3>6. OPEX (–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ)</h3>
                    <div class="formula-badge">–û—Ñ–∏—Å –∏ –°–±—ã—Ç</div>
                    <p>–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥, –ø—Ä–æ–¥–∞–∂–∏, –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è, –¥–∏—Ä–µ–∫—Ç–æ—Ä. –†–∞—Å—Ö–æ–¥—ã –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–º.</p>
                </div>

                <div class="struct-card sc-green">
                    <div class="sc-icon bg-green">‚≠ê</div>
                    <h3>7. EBITDA</h3>
                    <div class="formula-badge">–í–∞–ª–æ–≤–∞—è ‚àí OPEX</div>
                    <p>–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å –¥–æ –Ω–∞–ª–æ–≥–æ–≤ –∏ –∫—Ä–µ–¥–∏—Ç–æ–≤. –ì–ª–∞–≤–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å "–∑–¥–æ—Ä–æ–≤—å—è" –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞.</p>
                </div>

                <div class="struct-card sc-green">
                    <div class="sc-icon bg-green">üèÅ</div>
                    <h3>8. –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</h3>
                    <div class="formula-badge">–§–∏–Ω–∞–ª (Bottom line)</div>
                    <p>–¢–æ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫—É –ø–æ—Å–ª–µ —É–ø–ª–∞—Ç—ã –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –±–∞–Ω–∫—É, –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞–ª–æ–≥–æ–≤.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="calculator" style="background: #f8fafc;">
        <div class="container">
            <div class="section-header">
                <h2>P&L –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ —Å–ª–µ–≤–∞ ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
            </div>

            <div class="calc-wrapper">
                <div class="calc-inputs">
                    <h3 style="color: var(--primary);">–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö (‚ÇΩ)</h3>
                    
                    <div class="input-group">
                        <label>1. –í—ã—Ä—É—á–∫–∞</label>
                        <input type="number" id="in-rev" value="1000000">
                    </div>

                    <div class="input-group">
                        <label>2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–°—ã—Ä—å–µ)</label>
                        <input type="number" id="in-var" value="400000">
                    </div>

                    <div class="input-group">
                        <label>4. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø—Ä–æ–∏–∑–≤. (–¶–µ—Ö)</label>
                        <input type="number" id="in-fix" value="200000">
                    </div>

                    <div class="input-group">
                        <label>6. OPEX (–û—Ñ–∏—Å, –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥)</label>
                        <input type="number" id="in-opex" value="150000">
                    </div>

                    <div class="input-group">
                        <label>8. –ê–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è, % –∏ –ù–∞–ª–æ–≥–∏</label>
                        <input type="number" id="in-other" value="120000">
                    </div>
                    
                    <hr style="border:0; border-top:1px dashed #cbd5e1; margin: 10px 0;">
                    
                    <div class="input-group">
                        <label>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∞—Å–æ–≤ (+/-)</label>
                        <input type="number" id="in-inv" value="0">
                        <small style="color: #64748b; font-size: 0.75rem;">–í–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç—á–µ—Ç, –Ω–µ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–π.</small>
                    </div>
                </div>

                <div>
                    <div class="kpi-row">
                        <div class="kpi-card">
                            <span class="kpi-sub">–ú–∞—Ä–∂. –¥–æ—Ö–æ–¥</span>
                            <span class="kpi-val" id="out-md">0</span>
                            <span class="kpi-sub" id="out-md-p">0%</span>
                        </div>
                        <div class="kpi-card">
                            <span class="kpi-sub">EBITDA</span>
                            <span class="kpi-val" id="out-ebitda" style="color: var(--c-margin);">0</span>
                            <span class="kpi-sub" id="out-ebitda-p">0%</span>
                        </div>
                        <div class="kpi-card" style="background: #f0fdf4;">
                            <span class="kpi-sub">–ß–∏—Å—Ç–∞—è (–£–ø—Ä)</span>
                            <span class="kpi-val" id="out-net" style="color: var(--c-profit);">0</span>
                            <span class="kpi-sub" id="out-net-p">0%</span>
                        </div>
                    </div>

                    <h4 style="font-size: 1rem; margin-bottom: 15px;">–í–æ–¥–æ–ø–∞–¥ —Ä–∞—Å—Ö–æ–¥–æ–≤ (Waterfall)</h4>
                    <div class="chart-container">
                        <div class="waterfall" id="wf-chart">
                            </div>
                    </div>

                    <div class="comp-wrapper">
                        <div class="comp-block">
                            <h5 style="margin-bottom: 5px;">–£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∞—è –ø—Ä–∏–±—ã–ª—å</h5>
                            <div class="comp-bar-track"><div id="bar-mgmt" class="comp-bar-fill"></div></div>
                            <span id="val-mgmt" style="font-weight: 700;">0</span>
                        </div>
                        <div style="font-size: 1.5rem; color: #cbd5e1;">vs</div>
                        <div class="comp-block">
                            <h5 style="margin-bottom: 5px;">–ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è (—Å –∑–∞–ø–∞—Å–∞–º–∏)</h5>
                            <div class="comp-bar-track"><div id="bar-std" class="comp-bar-fill" style="background: var(--text-main);"></div></div>
                            <span id="val-std" style="font-weight: 700;">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p style="color: white; margin: 0;">¬© 2026 P&L Guide. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.</p>
            <div class="disclaimer">
                –î–∞–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–µ–ª—å—é —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–æ–≥–æ —É—á–µ—Ç–∞. –î–ª—è –Ω–∞–ª–æ–≥–æ–≤–æ–π –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –§–°–ë–£/–ú–°–§–û.
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // Inputs
            const inputs = {
                rev: document.getElementById('in-rev'),
                var: document.getElementById('in-var'),
                fix: document.getElementById('in-fix'),
                opex: document.getElementById('in-opex'),
                other: document.getElementById('in-other'),
                inv: document.getElementById('in-inv')
            };

            // Formatting
            const fmt = (n) => new Intl.NumberFormat('ru-RU').format(Math.round(n));
            const pct = (n, total) => total > 0 ? Math.round((n/total)*100) + '%' : '0%';

            function calculate() {
                const v = {
                    rev: parseFloat(inputs.rev.value) || 0,
                    var: parseFloat(inputs.var.value) || 0,
                    fix: parseFloat(inputs.fix.value) || 0,
                    opex: parseFloat(inputs.opex.value) || 0,
                    other: parseFloat(inputs.other.value) || 0,
                    inv: parseFloat(inputs.inv.value) || 0
                };

                // Logic
                const md = v.rev - v.var;
                const gp = md - v.fix; // Managerial Gross
                const ebitda = gp - v.opex;
                const net = ebitda - v.other;
                const stdNet = net + v.inv; // Standard accounting approx

                // Update KPIs
                document.getElementById('out-md').textContent = fmt(md);
                document.getElementById('out-md-p').textContent = pct(md, v.rev);
                
                document.getElementById('out-ebitda').textContent = fmt(ebitda);
                document.getElementById('out-ebitda-p').textContent = pct(ebitda, v.rev);
                
                document.getElementById('out-net').textContent = fmt(net);
                document.getElementById('out-net-p').textContent = pct(net, v.rev);

                // Update Comparison
                document.getElementById('val-mgmt').textContent = fmt(net);
                document.getElementById('val-std').textContent = fmt(stdNet);

                const maxVal = Math.max(Math.abs(net), Math.abs(stdNet), v.rev * 0.1) || 100;
                document.getElementById('bar-mgmt').style.width = Math.min(100, (Math.abs(net)/maxVal)*100) + '%';
                document.getElementById('bar-std').style.width = Math.min(100, (Math.abs(stdNet)/maxVal)*100) + '%';
                
                // Color Logic for Comparison
                document.getElementById('bar-mgmt').style.background = net >= 0 ? 'var(--primary)' : 'var(--c-var)';
                document.getElementById('bar-std').style.background = stdNet >= 0 ? 'var(--text-main)' : 'var(--c-var)';

                // Update Waterfall
                drawWaterfall(v, net);
            }

            function drawWaterfall(v, net) {
                const chart = document.getElementById('wf-chart');
                chart.innerHTML = ''; // Clear

                // Data points for waterfall
                const data = [
                    { label: '–í—ã—Ä—É—á–∫–∞', val: v.rev, type: 'start' },
                    { label: '–ü–µ—Ä–µ–º.', val: v.var, type: 'minus' },
                    { label: '–ü–æ—Å—Ç.', val: v.fix, type: 'minus' },
                    { label: 'OPEX', val: v.opex, type: 'minus' },
                    { label: '–ü—Ä–æ—á–∏–µ', val: v.other, type: 'minus' },
                    { label: '–ß–∏—Å—Ç–∞—è', val: net, type: 'end' }
                ];

                const scale = v.rev > 0 ? 100 / v.rev : 0;
                let currentH = v.rev; // Track current height level

                data.forEach(item => {
                    const col = document.createElement('div');
                    col.className = 'wf-col';

                    const spacer = document.createElement('div');
                    spacer.className = 'wf-spacer';
                    
                    const bar = document.createElement('div');
                    bar.className = 'wf-bar';
                    
                    const label = document.createElement('div');
                    label.className = 'wf-label';
                    label.textContent = item.label;

                    // Logic for spacer/bar height
                    if (item.type === 'start') {
                        bar.style.height = '100%';
                        bar.style.background = 'var(--c-revenue)';
                    } else if (item.type === 'minus') {
                        const barH = item.val * scale;
                        // For a 'minus' bar in a flex-end container:
                        // We need to push it up to "hang" from the previous level
                        // BUT standard HTML flex waterfall is tricky. 
                        // Simplified visual approximation:
                        // Spacer pushes bar down. 
                        // Top of bar should be at (Rev - PreviousDrops).
                        // Height is item.val.
                        
                        const topLevel = currentH; 
                        currentH -= item.val; 
                        // Gap from top (100% - topLevel%)
                        const spaceTop = (v.rev - topLevel) * scale;
                        
                        // We need a wrapper to position absolutely or flex-spacer logic
                        // Let's use simple flex spacer to push DOWN from top?
                        // Actually, in `justify-content: flex-end`, items align to bottom.
                        // So spacer height = (Bottom Level). Bar sits on top of spacer?
                        // No, simpler: Spacer height = (Current Level after drop). Bar sits on spacer.
                        
                        spacer.style.height = (currentH * scale) + '%';
                        bar.style.height = (barH) + '%';
                        bar.style.background = 'var(--c-var)';
                        bar.style.opacity = '0.7';
                        col.appendChild(spacer);
                    } else if (item.type === 'end') {
                        bar.style.height = (Math.abs(item.val) * scale) + '%';
                        bar.style.background = item.val >= 0 ? 'var(--c-profit)' : 'var(--c-var)';
                    }

                    col.appendChild(bar);
                    col.appendChild(label);
                    chart.appendChild(col);
                });
            }

            // Events
            Object.values(inputs).forEach(el => el.addEventListener('input', calculate));
            calculate(); // Init
        });
    </script>
</body>
</html>
